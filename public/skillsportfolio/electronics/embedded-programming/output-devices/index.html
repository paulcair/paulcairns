<!DOCTYPE html>
<html lang="en" dir="ltr">
<head><script src="/paulcairns/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=paulcairns/livereload" data-no-instant defer></script>
  <title>Paul Cairns - Output Devices</title>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="Creative Portfolio Template">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
<meta name="author" content="Themefisher">
<meta name="generator" content="Themefisher Kross Template v1.0">

  <link rel="stylesheet" href="/paulcairns/assets/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="/paulcairns/assets/css/main.css?v=1708523176">





  <link rel="stylesheet" href="/paulcairns/assets/plugins/slick/slick.css">
  
  <link rel="stylesheet" href="/paulcairns/assets/plugins/themify-icons/themify-icons.css">
  <link rel="stylesheet" href="/paulcairns/assets/plugins/css/css.css">

  
  <link href="/paulcairns/assets/css/style.css" rel="stylesheet">
  <script src="/paulcairns/assets/plugins/jQuery/jquery.min.js"></script>
  <script src="/paulcairns/assets/plugins/bootstrap/bootstrap.min.js"></script>
  <script src="/paulcairns/assets/plugins/shuffle/shuffle.min.js"></script> 
  <script src="/paulcairns/assets/js/typewrite.js"></script> 
  

</head>
<body>

  
<header class="navigation">
    <nav class="navbar navbar-dark">
      <a class="navbar-brand" href="http://localhost:1313/paulcairns//index.html"><img src="http://localhost:1313/paulcairns//paul-logo.png" alt="FabAcadeLogo"></a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation"
        aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
  
      <div class="collapse navbar-collapse text-center" id="navigation">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item active">
            <a class="nav-link" href="http://localhost:1313/paulcairns//index.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="http://localhost:1313/paulcairns//about/paul-cairns">About</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="http://localhost:1313/paulcairns//#projects">Projects</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="http://localhost:1313/paulcairns//skillsportfolio">Skills Portfolio</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="http://localhost:1313/paulcairns//publications">Publications</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="http://localhost:1313/paulcairns//videos">Videos</a>
          </li>
        </ul>
      </div>
    </nav>
  </header>

  <section class="hero-area bg-dark" id="parallax">
    <div class="container">
      <div class="row">
        <div class="col-lg-11 bg-green p-3 rounded-lg mx-auto">
          
          <h1 class="text-white text-center text-decoration-none font-tertiary">
            <a href="" class="typewrite" data-period="2000" data-type='["Output Devices: showcasing my programming of output devices", "See the work I did for one of my Fab Academy assignments", "Please browse at your convenience."," Enjoy!" ]'>
              <span class="wrap"></span>
            </a>
          </h1>
          
          
          <h5 class="text-white bg-green text-decoration-none text-center py-2">
            Objective: to learn about output devices and how to program them.
          </h5>
          
        </div>
      </div>
    </div>
  </section>

  <div class="container">
    <h1 class="text-center text-decoration-none pt-5">Output Devices</h1>
  </div>


<main class="py-5">
  <div class="row justify-content-center px-4">
    <img class="img-fluid position: center mb-4" src="/paulcairns/skillsportfolio/electronics/embedded-programming/output-devices/bargraph.jpg" alt="bargraph.jpg">
  </div>  
  <div class = "container mt-5">
    <hr>
<p>The assignment for this week was to learn about output devices. For my final project, I will need to measure and output the current, voltage, and temperature onto LED displays and an LED bargraph. Therefore, I elected to learn how to use and program these output devices this week. The assignment overview and learning outcomes are shared below.</p>
<p><strong>Group assignment:</strong></p>
<p>The tasks for the group assignment are as follows.</p>
<ul>
<li>Measure the power consumption of an output device</li>
<li>Document your work (in a group or individually)</li>
</ul>
<p><strong>Individual assignment:</strong></p>
<p>The tasks for the individual assignment are as follows.</p>
<ul>
<li>Add an output device to a microcontroller board you&rsquo;ve designed and program it to do something</li>
</ul>
<p><strong>Learning outcomes:</strong></p>
<ul>
<li>Demonstrate workflows used in controlling an output device(s) with MCU board you have designed</li>
<li>Link to the group assignment page</li>
<li>Document how you determined power consumption of an output device with your group</li>
<li>Document what you learned from interfacing output device(s) to microcontroller and controlling the device(s)</li>
<li>Describe your design and fabrication process or linked to previous examples.</li>
<li>Explain the programming process/es you used.</li>
<li>Outline problems and how you fixed them</li>
<li>Include original design files and code</li>
<li>Include a ‘hero shot/video’ of your board</li>
</ul>
<h1 id="group-assignment">Group Assignment</h1>
<p>For the group assignment it was necessary to measure the power consumption of an output device. To do this we need to measure the current and voltage of the output device. We chose to measure the power consumption of the LED bargraph.</p>
<p>To measure power, it is necessary to measure the current and voltage. We chose to do this with a multimeter as shown in the image below:</p>
<img class="img-fluid pt-4 pb-5"
     src="group1.jpg"
     alt="group1.jpg">
<p>To measure the power using an oscilloscope it is necessary to set up a voltage measurement on one channel and the voltage drop across a shunt resistor on a different channel. A good tutorial on how to use an oscilloscope to measure power consumption <a href="https://articles.saleae.com/oscilloscopes/how-to-measure-current-with-an-oscilloscope">can be found at this link here.</a></p>
<p>Some of the work presented in that article is presented below:</p>
<p><strong>Oscilloscope Setup</strong></p>
<p>Let&rsquo;s take a  look at how we might configure our oscilloscope to measure current. At first glance, our original schematic (Figure 2) might look like it would work well. Using the resistor on the positive rail is known as a high-side shunt resistor. There is a slight problem with that, however: the ground clip on most desktop oscilloscopes is directly connected to earth ground!</p>
<p>If we are working with a circuit that is grounded and a desktop oscilloscope (that is also properly grounded), then connecting the ground clip to either side of Rsh would result in a short. Not good.</p>
<p>One option is to move the resistor to the return path (known as a low-side shunt resistor) and connect the oscilloscope&rsquo;s ground clip to the circuit&rsquo;s ground.</p>
<img class="img-fluid pt-4 pb-5"
     src="shunt.jpg"
     alt="shunt.jpg">
<p>You will not have to worry about shorting out your power supply with this setup. However, you introduce a new problem: a ground loop. Current can circulate around the ground loop (from earth ground, through our circuit under test, through the oscilloscope ground clip, back to ground through the oscilloscope).</p>
<img class="img-fluid pt-4 pb-5"
     src="ground.jpg"
     alt="ground.jpg">
<p>Ground loops can cause unwanted interference or noise to appear on your measurements or in your circuit. This article does a great job at explaining ground loops. Note that this is only a real problem if both your oscilloscope and circuit under test are both connected to earth ground, as shown in figure 4.</p>
<p>If your oscilloscope or device under test is battery-powered or isolated from earth ground, you do not need to worry about this issue. However, to be extra safe, the best way to measure the voltage drop across a shunt resistor is to use a two-probe setup configured as a differential pair.</p>
<p><strong>Differential Probe Setup</strong></p>
<p>You will need 2 channels on your oscilloscope to perform this measurement. Most oscilloscopes have their ground clips connected together (you can confirm this with a multimeter if you are unsure). As a result, we do not need to connect the ground clips to anything.</p>
<p>Connect your probe tips to either side of the shunt resistor. For this example, we assume that channel 1 is at a higher potential than channel 2. While Figure 5 shows a low-side shunt resistor, note that you can do this with a high-side resistor as well.</p>
<img class="img-fluid pt-4 pb-5"
     src="differential.jpg"
     alt="differential.jpg">
<p>On your oscilloscope, select the Math function (assuming your oscilloscope has such a function). From there, you should be able to plot the output of Ch 1 - Ch 2. By subtracting the channel 2 voltage from the channel 1 voltage, we can compute the voltage drop across the resistor without worrying about shorting our power supply or creating a ground loop!</p>
<p>Remember that for every point on this waveform, you will need to divide the voltage by the value of the shunt resistor to get the current flowing into your system. Some oscilloscopes allow you to divide the measured value by a constant to save you from needing to perform this step. Check the Math functions in your oscilloscope!</p>
<p>Unfortunately, we did not have a chance to complete the power consumption measurement using an oscilloscope.</p>
<h1 id="individual-assignment">Individual Assignment</h1>
<p>For the individual assignment we were tasked with adding an output device to a microcontroller board that we have designed and programming it. To do this I intend to use the Adrianino that I created in assignment <a href="7-elesctronics-design">7. Electronics design</a> and use jumpers to the pinouts of the analog and digital pins. For the final project I will properly design and integrate these sensors into my PCB. The workflow used to perform the tasks in this assignment are discussed in the following section.</p>
<h2 id="workflow">Workflow</h2>
<ol>
<li>Determine the technical specifications of output devices</li>
<li>Connect your output devices to your microcontroller board</li>
<li>Program your microcontroller to output to your device</li>
<li>Test your program</li>
<li>Debug and adjust as necessary</li>
</ol>
<h3 id="1-determine-specifications-of-sensors">1. Determine specifications of sensors</h3>
<p>The first step is to look at the documentation of the output devices and determine their specifications and how to connect them to your microchip. Below is an overview of the output devices</p>
<p><strong>LED display</strong></p>
<img class="img-fluid pt-4 pb-5"
     src="display.jpg"
     alt="display.jpg">
<p>For this project we used the TM1637 LED display. It is a 4-digit 7-segment LED display has 12 pins. 8 of the pins are for the 8 LEDs on a 7 segment display, which includes A-G and DP (decimal point). The other 4 pins represent each of the 4 digits from D1-D4.</p>
<p>Specifications:</p>
<ol>
<li>Driver IC: TM1637</li>
<li>Size: 30mm x 14mm</li>
<li>Display Color: Red</li>
<li>Connection to an Arduino UNO:</li>
</ol>
<p>VCC to Arduino 5v
GND to Arduino GND
CLK to Arduino digital pin, your choice
DIO to Arduino digital pin, your choice</p>
<p>The pinout of the display is shown in the image below:</p>
<img class="img-fluid pt-4 pb-5"
     src="led-pinout.jpg"
     alt="led-pinout.jpg">
<p>There are two very good tutorials on how to wire and pin these displays at the following two links.</p>
<ul>
<li><a href="https://lastminuteengineers.com/tm1637-arduino-tutorial/">LED display tutorial 1</a></li>
<li><a href="https://www.instructables.com/Tutorial-How-to-4-Digit-Display-Interface-With-Ard/">LED display tutorial 2</a></li>
</ul>
<p>In order to use this board using Arduino IDE you will need to download the <a href="https://github.com/avishorp/TM1637">TM1637 library by Avishay Orpaz</a>. It can also be found in the Arduino IDE Library manager.</p>
<img class="img-fluid pt-4 pb-5"
     src="displaylib.jpg"
     alt="displaylib.jpg">
<p>Next is to determine the specifications of the led bar graph.</p>
<p><strong>LED Bargraph</strong></p>
<img class="img-fluid pt-4 pb-5"
     src="bargraph.jpg"
     alt="bargraph.jpg">
<p>The LED bargraph is displayed using a NeoPixel Stick - 8 x 5050 RGB LED with Integrated Drivers. The strip consist of 8 tiny 5050 (5mm x 5mm) smart RGB LEDs onto a PCB with mounting holes and a chainable design. It uses only one microcontroller pin to control all 8 LEDS. Each LED is addressable as the driver chip is inside the LED. Each one has ~18mA constant current drive so the color will be very consistent even if the voltage varies, and no external choke resistors are required making the design slim. Power the whole thing with 5VDC (4-7V works) and you&rsquo;re ready to rock.</p>
<p>Specifications:</p>
<ul>
<li><a href="https://learn.adafruit.com/adafruit-neopixel-uberguide/downloads">Datasheets, EagleCAD PCB files and Fritzing Library</a></li>
<li>available in the NeoPixel tutorial</li>
<li>Dimensions: 51.10mm / 2&quot; x 10.22mm / 0.4&quot; x 3.19mm / 0.12&quot;</li>
<li>Weight: 2.57g</li>
<li>May ship with either WS2812B or SK6812-based LEDs. They are the same brightness, color and protocol</li>
</ul>
<p>You can find the <a href="https://github.com/adafruit/Adafruit_NeoPixel">library to add to your Arduino IDE here</a></p>
<p>Now that we are familiar with our output devices, we will connect them to our board and program our microcontroller.</p>
<h3 id="2-connect-your-sensors-to-your-microcontroller-board">2. Connect your sensors to your microcontroller board</h3>
<p>The next step in the workflow is to connect your sensors to your microcontroller board. The micro controller board is an AT-tiny-1614. The board has analog/digital pins at pins PA4, PA5, PA6, and PA7. These correspond to Arduino Adresses of 0, 1, 2, and 3 respectively. The image below illustrates the pinout.</p>
<img class="img-fluid pt-4 pb-5"
     src="pinout.jpg"
     alt="pinout.jpg">
<p>The photo below shows the board and the 4 I/O digital analog pins available.</p>
<div class = "row row-cols-1 row-cols-md-2 pt-4 pb-4">

    <div class = "col">
       <div class = "card">
           <img class="card-img-top"
           src="PCB.jpg" 
           alt="PCB.jpg">
        </div>
    </div>

    <div class = "col">
        <div class = "card">
            <img class="card-img-top"
            src="board.jpg" 
            alt="board.jpg">
         </div>
     </div>

</div>
<p>Due to a limitation of pins on my board (4 pins) I decided to program all of the sensors and output devices one an arduino first and then do another version with just one sensor (volt sensor) and one output device on my board.Below is a photo of the final wiring of all of the sensors connected to the Arduino:</p>
<img class="img-fluid pt-4 pb-5"
     src="arduino.jpg"
     alt="arduino.jpg">
<p>For the Arduino the pinning was as follows:</p>
<ul>
<li>A0 - Current sensor output</li>
<li>A1 - Voltage sensor output</li>
<li>2  - Temperature sensor output</li>
<li>3  - CLK of led display for current value</li>
<li>4  - DIO of led display for current value</li>
<li>5  - CLK of led display for voltage value</li>
<li>6  - DIO of led display for voltage value</li>
<li>7  - digital control pin of led bargraph</li>
</ul>
<p>Below is a photo of photo of the volt sensor and one LED display using my AT-Tiny-1614 board.</p>
<img class="img-fluid pt-4 pb-5"
     src="wiring.jpg"
     alt="wiring.jpg">
<p>With this configuration I used the following pinning:</p>
<ul>
<li>PA4/0 - CLK of LED display</li>
<li>PA5/1 - DIO of LED display</li>
<li>PA7/3 - Analog output of voltage sensor</li>
</ul>
<p>Now that everything is wired it is time to program the microcontroller.</p>
<h3 id="3-program-your-microcontroller">3. Program your microcontroller</h3>
<p>To program my microcontroller I elected to use Arduino IDE. Both of my output devices required libraries to be added to my Arduino IDE in order to function, I will therefore discuss briefly how to add the libraries below. You can find a tutorial on the <a href="http://www.arduino.cc/en/Guide/Libraries">Arduino website here</a>.</p>
<p><strong>A) Install any necessary ZIP libraries using library manager</strong></p>
<p>The first step is to download and extract the zip folders. You can download the zip folders that contain the libraries for each device using the following links:</p>
<ul>
<li><a href="https://github.com/avishorp/TM1637">TM1637 LED display</a></li>
<li><a href="https://github.com/adafruit/Adafruit_NeoPixel">Neopixel LED bargraph</a></li>
</ul>
<p>Once downloaded, find your Arduino folder that contains your libraries and paste the zip files there.  You can then use the Library manager under <em><strong>Sketch -&gt; Include Library -&gt; Add .Zip library</strong></em> in Arduino to upload them. You can find a tutorial on the <a href="http://www.arduino.cc/en/Guide/Libraries">Arduino website here</a>.</p>
<div class = "row row-cols-1 row-cols-md-2 pt-4 pb-4">

    <div class = "col">
       <div class = "card">
           <img class="card-img-top"
           src="libadd.jpg" 
           alt="libadd.jpg">
        </div>
    </div>

    <div class = "col">
        <div class = "card">
            <img class="card-img-top"
            src="zipadd.jpg" 
            alt="zipadd.jpg">
         </div>
     </div>

</div>
<p>once completed you can include them in your code by using the following headers</p>
<pre tabindex="0"><code>#include &lt;library_name.h&gt;
</code></pre><img class="img-fluid pt-4 pb-5"
     src="includelibs.jpg"
     alt="includelibs.jpg">
<p>Note that all three of the zip folder libraries need to be installed but only the Robojax and Dallas temperature need to be included. Once completed you can write your code.</p>
<p><strong>B) Write your code</strong></p>
<p>The next step is to write your code, be sure to use any commands that have been added by including any libraries.</p>
<p>For the TM1376 LED displays the tutorial <a href="https://lastminuteengineers.com/tm1637-arduino-tutorial/">at this link</a> was very useful.</p>
<p>For the Neopixel LED bar graph the GitHub page <a href="https://learn.adafruit.com/adafruit-neopixel-uberguide/arduino-library-use">at this link</a> had good explanations of the code.</p>
<p>The code for all of my sensors and output devices is here:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#include &lt;Robojax_AllegroACS_Current_Sensor.h&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#include &lt;DallasTemperature.h&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#include &lt;OneWire.h&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#include &lt;TM1637Display.h&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#include &lt;Adafruit_NeoPixel.h&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#ifdef __AVR__</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">#include &lt;avr/power.h&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#endif</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">//</span><span style="color:#66d9ef">DECLARING</span> <span style="color:#66d9ef">CONSTANT</span> <span style="color:#66d9ef">VARIABLES</span> <span style="color:#66d9ef">AND</span> <span style="color:#66d9ef">PINS</span>
</span></span><span style="display:flex;"><span>const float <span style="color:#66d9ef">Vratio</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span><span style="color:#f92672">.</span><span style="color:#ae81ff">128</span>;   <span style="color:#e6db74">//</span>ratio of voltage reduction based on experiment
</span></span><span style="display:flex;"><span>const float <span style="color:#66d9ef">VCC</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span><span style="color:#f92672">.</span><span style="color:#ae81ff">04</span>;       <span style="color:#e6db74">//</span> value of <span style="color:#66d9ef">VCC</span> of the board based on measurements
</span></span><span style="display:flex;"><span>const int <span style="color:#66d9ef">CurrentPin</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">A0</span>;    <span style="color:#e6db74">//</span> pin where current sensor is conncected
</span></span><span style="display:flex;"><span>const int <span style="color:#66d9ef">VoltPin</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">A1</span>;        <span style="color:#e6db74">//</span> pin where voltage sensor is connected
</span></span><span style="display:flex;"><span>const int <span style="color:#66d9ef">TempPin</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;       <span style="color:#e6db74">//</span> pin where temperature sensor is connected
</span></span><span style="display:flex;"><span>const int <span style="color:#66d9ef">MODEL</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;          <span style="color:#e6db74">//</span> value of the current sensor model, see below
</span></span><span style="display:flex;"><span>const int <span style="color:#66d9ef">CLKI</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>;          <span style="color:#e6db74">//</span> clock <span style="color:#66d9ef">for</span> current (I) readout <span style="color:#66d9ef">LED</span> display 
</span></span><span style="display:flex;"><span>const int <span style="color:#66d9ef">DIOI</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>;          <span style="color:#e6db74">//</span> <span style="color:#66d9ef">DIO</span> <span style="color:#66d9ef">for</span> current (I) readout <span style="color:#66d9ef">LED</span> display)
</span></span><span style="display:flex;"><span>const int <span style="color:#66d9ef">CLKV</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>;          <span style="color:#e6db74">//</span> clock <span style="color:#66d9ef">for</span> voltage (V) readout <span style="color:#66d9ef">LED</span> display
</span></span><span style="display:flex;"><span>const int <span style="color:#66d9ef">DIOV</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">6</span>;          <span style="color:#e6db74">//</span> <span style="color:#66d9ef">DIO</span> <span style="color:#66d9ef">for</span> voltage (V) readout <span style="color:#66d9ef">LED</span> display 
</span></span><span style="display:flex;"><span>const int <span style="color:#66d9ef">LEDPIN</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">7</span>;
</span></span><span style="display:flex;"><span>const int <span style="color:#66d9ef">NUMPIXELS</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">8</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">//</span> <span style="color:#66d9ef">SET</span> <span style="color:#66d9ef">UP</span> <span style="color:#66d9ef">THE</span> <span style="color:#66d9ef">CURRENT</span> <span style="color:#66d9ef">SENSOR</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">//</span><span style="color:#e6db74">&#39;robojax&#39;</span> function uses format robojax(<span style="color:#66d9ef">MODEL</span>, <span style="color:#66d9ef">INPUT</span><span style="color:#f92672">-</span><span style="color:#66d9ef">VARIABLE</span>) where the model I am using is model <span style="color:#66d9ef">ACS712ELECT</span><span style="color:#f92672">-</span><span style="color:#ae81ff">5</span>B 
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">//</span>which corresponds to a value of <span style="color:#ae81ff">0</span> according to <span style="color:#e6db74">https</span>:<span style="color:#e6db74">//</span>robojax<span style="color:#f92672">.</span>com<span style="color:#f92672">/</span>learn<span style="color:#f92672">/</span>arduino<span style="color:#f92672">/</span>?vid<span style="color:#f92672">=</span>robojax_Alegro_ACS712_curren_sensor
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">Robojax_AllegroACS_Current_Sensor</span> robojax(<span style="color:#66d9ef">MODEL</span>,<span style="color:#66d9ef">CurrentPin</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">//</span><span style="color:#66d9ef">SET</span> <span style="color:#66d9ef">UP</span> <span style="color:#66d9ef">THE</span> <span style="color:#66d9ef">TEMPERATURE</span> <span style="color:#66d9ef">SENSOR</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">//se</span>t the pin (<span style="color:#66d9ef">TempPin</span>) that the <span style="color:#66d9ef">OneWire</span> will communicate through
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">OneWire</span> oneWire(<span style="color:#66d9ef">TempPin</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">//</span>pass oneWire reference to <span style="color:#66d9ef">Dallas</span> <span style="color:#66d9ef">Temperature</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">DallasTemperature</span> sensors(<span style="color:#f92672">&amp;</span>oneWire);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">//</span><span style="color:#66d9ef">SET</span> <span style="color:#66d9ef">UP</span> <span style="color:#66d9ef">LED</span> <span style="color:#66d9ef">DISPLAYS</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">TM1637Display</span> displayI <span style="color:#f92672">=</span> <span style="color:#66d9ef">TM1637Display</span>(<span style="color:#66d9ef">CLKI</span>, <span style="color:#66d9ef">DIOI</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">TM1637Display</span> displayV <span style="color:#f92672">=</span> <span style="color:#66d9ef">TM1637Display</span>(<span style="color:#66d9ef">CLKV</span>, <span style="color:#66d9ef">DIOV</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">//</span><span style="color:#66d9ef">SET</span> <span style="color:#66d9ef">UP</span> <span style="color:#66d9ef">LED</span> <span style="color:#66d9ef">BAR</span> <span style="color:#66d9ef">GRAPH</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">Adafruit_NeoPixel</span> pixels(<span style="color:#66d9ef">NUMPIXELS</span>, <span style="color:#66d9ef">LEDPIN</span>, <span style="color:#66d9ef">NEO_GRB</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">NEO_KHZ800</span>); 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>void setup() {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">//</span><span style="color:#66d9ef">Start</span> serial monitor
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">Serial</span><span style="color:#f92672">.</span>begin(<span style="color:#ae81ff">9600</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">//</span><span style="color:#66d9ef">Start</span> sensors library <span style="color:#66d9ef">for</span> temperature sensor
</span></span><span style="display:flex;"><span>  sensors<span style="color:#f92672">.</span>begin(); 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">//</span><span style="color:#66d9ef">Clear</span> <span style="color:#66d9ef">LED</span> voltage <span style="color:#f92672">and</span> current displays
</span></span><span style="display:flex;"><span>  displayV<span style="color:#f92672">.</span>clear();
</span></span><span style="display:flex;"><span>  displayI<span style="color:#f92672">.</span>clear();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">//</span><span style="color:#66d9ef">Setup</span> <span style="color:#66d9ef">LED</span> bar graph
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">#if defined(__AVR_ATtiny85__) &amp;&amp; (F_CPU == 16000000)</span>
</span></span><span style="display:flex;"><span>  clock_prescale_set(clock_div_1);
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">#endif</span>
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>begin();
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>clear();
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>show();
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setBrightness(<span style="color:#ae81ff">20</span>);
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">//</span><span style="color:#66d9ef">Set</span> pin modes
</span></span><span style="display:flex;"><span>  pinMode(<span style="color:#66d9ef">CurrentPin</span>,<span style="color:#66d9ef">INPUT</span>);
</span></span><span style="display:flex;"><span>  pinMode(<span style="color:#66d9ef">VoltPin</span>, <span style="color:#66d9ef">INPUT</span>);
</span></span><span style="display:flex;"><span>  pinMode(<span style="color:#66d9ef">TempPin</span>, <span style="color:#66d9ef">INPUT</span>);
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>}<span style="color:#f92672">//</span><span style="color:#66d9ef">end</span> of void setup()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>void <span style="color:#66d9ef">loop</span>() {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">//</span><span style="color:#66d9ef">GET</span> <span style="color:#66d9ef">AND</span> <span style="color:#66d9ef">PRINT</span> <span style="color:#66d9ef">CURRENT</span>
</span></span><span style="display:flex;"><span>  float <span style="color:#66d9ef">Current</span> <span style="color:#f92672">=</span> robojax<span style="color:#f92672">.</span>getCurrent();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">Serial</span><span style="color:#f92672">.</span>print(<span style="color:#e6db74">&#34;Current = &#34;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">Serial</span><span style="color:#f92672">.</span>print(<span style="color:#66d9ef">Current</span>,<span style="color:#ae81ff">3</span>); <span style="color:#e6db74">//</span>print the current to <span style="color:#ae81ff">3</span> decimal places
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">Serial</span><span style="color:#f92672">.</span>print(<span style="color:#e6db74">&#34; A    &#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">//</span><span style="color:#66d9ef">GET</span> <span style="color:#66d9ef">AND</span> <span style="color:#66d9ef">PRINT</span> <span style="color:#66d9ef">VOLTAGE</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">//</span>calculate voltage <span style="color:#f92672">and</span> convert from bit reading to voltage value <span style="color:#66d9ef">in</span> volts
</span></span><span style="display:flex;"><span>  float <span style="color:#66d9ef">Voltage</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">VCC</span><span style="color:#f92672">*</span>analogRead(<span style="color:#66d9ef">VoltPin</span>)<span style="color:#f92672">*</span><span style="color:#66d9ef">Vratio</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1023</span>; 
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">Serial</span><span style="color:#f92672">.</span>print(<span style="color:#e6db74">&#34;Voltage = &#34;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">Serial</span><span style="color:#f92672">.</span>print(<span style="color:#66d9ef">Voltage</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">Serial</span><span style="color:#f92672">.</span>print(<span style="color:#e6db74">&#34; V    &#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">//</span><span style="color:#66d9ef">GET</span> <span style="color:#66d9ef">AND</span> <span style="color:#66d9ef">PRINT</span> <span style="color:#66d9ef">TEMPERATURE</span>
</span></span><span style="display:flex;"><span>  sensors<span style="color:#f92672">.</span>requestTemperatures();
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  float tempC <span style="color:#f92672">=</span> sensors<span style="color:#f92672">.</span>getTempCByIndex(<span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">Serial</span><span style="color:#f92672">.</span>print(<span style="color:#e6db74">&#34;Temperature = &#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">Serial</span><span style="color:#f92672">.</span>print(tempC);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">Serial</span><span style="color:#f92672">.</span>print(<span style="color:#e6db74">&#34; degC   &#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">//</span><span style="color:#66d9ef">PRINT</span> <span style="color:#66d9ef">VOLTAGE</span> <span style="color:#66d9ef">AND</span> <span style="color:#66d9ef">CURRENT</span> <span style="color:#66d9ef">ON</span> <span style="color:#66d9ef">LED</span> <span style="color:#66d9ef">DISPLAYS</span>
</span></span><span style="display:flex;"><span>  int voltdisplay <span style="color:#f92672">=</span> <span style="color:#66d9ef">Voltage</span><span style="color:#f92672">*</span><span style="color:#ae81ff">100</span>;
</span></span><span style="display:flex;"><span>  displayV<span style="color:#f92672">.</span>setBrightness(<span style="color:#ae81ff">5</span>); 
</span></span><span style="display:flex;"><span>  displayV<span style="color:#f92672">.</span>showNumberDecEx(voltdisplay, <span style="color:#ae81ff">0b01000000</span>, <span style="color:#66d9ef">false</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">0</span>);<span style="color:#f92672">//</span> <span style="color:#66d9ef">Prints</span> voltage on <span style="color:#66d9ef">LED</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  int currdisplay <span style="color:#f92672">=</span> <span style="color:#66d9ef">Current</span> <span style="color:#f92672">*</span><span style="color:#ae81ff">10000</span>;
</span></span><span style="display:flex;"><span>  displayI<span style="color:#f92672">.</span>setBrightness(<span style="color:#ae81ff">5</span>);
</span></span><span style="display:flex;"><span>  displayI<span style="color:#f92672">.</span>showNumberDecEx(currdisplay, <span style="color:#ae81ff">0b01000000</span>, <span style="color:#66d9ef">false</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">1</span>);<span style="color:#f92672">//</span> <span style="color:#66d9ef">Prints</span> voltage on <span style="color:#66d9ef">LED</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#e6db74">//</span><span style="color:#66d9ef">DISPLAY</span> <span style="color:#66d9ef">TEMPERATURE</span> <span style="color:#66d9ef">ON</span> <span style="color:#66d9ef">LED</span> <span style="color:#66d9ef">BARGRAPH</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  int led <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>  led <span style="color:#f92672">=</span> map(tempC, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">125</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">7</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">Serial</span><span style="color:#f92672">.</span>print(<span style="color:#e6db74">&#34;LED is :  &#34;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">Serial</span><span style="color:#f92672">.</span>println(led);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(led <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>){
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>clear();
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>show();
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">0</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">255</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>show();
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span>(led <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>){
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>clear();
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>show();
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">0</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">255</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">1</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">128</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>show();
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span>(led <span style="color:#f92672">==</span> <span style="color:#ae81ff">2</span>){
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>clear();
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>show();
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">0</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">255</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">1</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">128</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">2</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">135</span>,<span style="color:#ae81ff">206</span>,<span style="color:#ae81ff">235</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>show();
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span>(led <span style="color:#f92672">==</span> <span style="color:#ae81ff">3</span>){
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>clear();
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>show();
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">0</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">255</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">1</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">128</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">2</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">135</span>,<span style="color:#ae81ff">206</span>,<span style="color:#ae81ff">235</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">3</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">255</span>,<span style="color:#ae81ff">255</span>,<span style="color:#ae81ff">0</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>show();
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span>(led <span style="color:#f92672">==</span> <span style="color:#ae81ff">4</span>){
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>clear();
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>show();
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">0</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">255</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">1</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">128</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">2</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">135</span>,<span style="color:#ae81ff">206</span>,<span style="color:#ae81ff">235</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">3</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">255</span>,<span style="color:#ae81ff">255</span>,<span style="color:#ae81ff">0</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">4</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">255</span>,<span style="color:#ae81ff">140</span>,<span style="color:#ae81ff">0</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>show();
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span>(led <span style="color:#f92672">==</span> <span style="color:#ae81ff">5</span>){
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>clear();
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>show();
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">0</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">255</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">1</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">128</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">2</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">135</span>,<span style="color:#ae81ff">206</span>,<span style="color:#ae81ff">235</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">3</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">255</span>,<span style="color:#ae81ff">255</span>,<span style="color:#ae81ff">0</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">4</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">255</span>,<span style="color:#ae81ff">140</span>,<span style="color:#ae81ff">0</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">5</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">255</span>,<span style="color:#ae81ff">69</span>,<span style="color:#ae81ff">0</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>show();
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span>(led <span style="color:#f92672">==</span> <span style="color:#ae81ff">6</span>){
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>clear();
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>show();
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">0</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">255</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">1</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">128</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">2</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">135</span>,<span style="color:#ae81ff">206</span>,<span style="color:#ae81ff">235</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">3</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">255</span>,<span style="color:#ae81ff">255</span>,<span style="color:#ae81ff">0</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">4</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">255</span>,<span style="color:#ae81ff">140</span>,<span style="color:#ae81ff">0</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">5</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">255</span>,<span style="color:#ae81ff">69</span>,<span style="color:#ae81ff">0</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">6</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">255</span>,<span style="color:#ae81ff">30</span>,<span style="color:#ae81ff">0</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>show();
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span>(led <span style="color:#f92672">==</span> <span style="color:#ae81ff">7</span>){
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>clear();
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>show();
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">0</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">255</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">1</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">128</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">2</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">135</span>,<span style="color:#ae81ff">206</span>,<span style="color:#ae81ff">235</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">3</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">255</span>,<span style="color:#ae81ff">255</span>,<span style="color:#ae81ff">0</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">4</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">255</span>,<span style="color:#ae81ff">140</span>,<span style="color:#ae81ff">0</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">5</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">255</span>,<span style="color:#ae81ff">69</span>,<span style="color:#ae81ff">0</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">6</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">255</span>,<span style="color:#ae81ff">30</span>,<span style="color:#ae81ff">0</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>setPixelColor(<span style="color:#ae81ff">7</span>,pixels<span style="color:#f92672">.</span>Color(<span style="color:#ae81ff">255</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>));
</span></span><span style="display:flex;"><span>  pixels<span style="color:#f92672">.</span>show();
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>    pixels<span style="color:#f92672">.</span>clear();
</span></span><span style="display:flex;"><span>    pixels<span style="color:#f92672">.</span>show();
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span> delay(<span style="color:#ae81ff">500</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>}<span style="color:#f92672">//</span><span style="color:#66d9ef">end</span> of void <span style="color:#66d9ef">loop</span>()
</span></span></code></pre></div><p>Note that the rgb colors for the led bar graph were as follows:</p>
<p>blue    #0000FF	(0,0,255)
navy	#000080	(0,0,128)
sky blue	#87CEEB	(135,206,235)
Yellow	#FFFF00	(255,255,0)
dark orange	#FF8C00	(255,140,0)
orange red	#FF4500	(255,69,0)
dark red	#FF0000	(255,30,0)
red	#FF0000	(255,0,0)</p>
<h3 id="4-test-your-program">4. Test your program</h3>
<p>Run your program and test your results. The video below shows the results of the voltage and current sensor outputs on the LED displays using the Arduino</p>
<div class = "row row-cols-1 row-cols-md-1 pb-4">
    <div class = "col md-12 pt-4 pb-5">
        <div class = "card">
            <video controls autoplay loop muted class ="embed-responsive-item"> 
             <source
                src="demo1.mp4" 
                type="video/mp4">
            </video>
        </div>
    </div>
</div>
<p>This video demonstrates the LED bargraph and temperature sensor functioning in conjuction. You can see the responsiveness of heating the probe causing LEDs to light up.</p>
<div class = "row row-cols-1 row-cols-md-1 pb-4">
    <div class = "col md-12 pt-4 pb-5">
        <div class = "card">
            <video controls autoplay loop muted class ="embed-responsive-item"> 
             <source
                src="demo2.mp4" 
                type="video/mp4">
            </video>
        </div>
    </div>
</div>
<p>Lastly, once I had tested and programmed all of the sensors and output devices using the Arduino board (note, for my final project I intend to use a larger chip with more pins than what my current At-Tiny 1614 board is capable of), I tested that I could get one sensor (the voltage sensor) and one output device (the LED display) using the microcontoller board that I made and programmed. The video below demonstrates the results.</p>
<div class = "row row-cols-1 row-cols-md-1 pb-4">
    <div class = "col md-12 pt-4 pb-5">
        <div class = "card">
            <video controls autoplay loop muted class ="embed-responsive-item"> 
             <source
                src="demo3.mp4" 
                type="video/mp4">
            </video>
        </div>
    </div>
</div>
<p>Fnally, it is time to discuss some debugging that occured.</p>
<h3 id="5-debug-and-adjust-as-necessary">5. Debug and adjust as necessary</h3>
<p>With this week, the main bug that I encountered was the error code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#66d9ef">ACK</span> error with st_ptr_inc16
</span></span></code></pre></div><img class="img-fluid pt-4 pb-5"
     src="error.jpg"
     alt="error.jpg">
<p>Upon multiple trials of using different versions of the MegaTinyCore library, turning the chip on and off and various other issues I found that by disconnecting the output devices from the pins this issue was resolved. This is shown in the image below.</p>
<img class="img-fluid pt-4 pb-5"
     src="unplug.jpg"
     alt="unplug.jpg">
<p>once this was done the issues were resolved!</p>
<h1 id="files">Files</h1>
<ul>
<li><a href="outputdevices-arduino.ino">Output devices Arduino</a></li>
<li><a href="outputdevices-egboard.ino">Output devices AT-Tiny-Board</a></li>
</ul>
  
  </div> 
   
    
  </div>
</main>

<footer class="py-3 bg-primary text-white">
  <div class="container bg-primary py-3">
    &copy; <a href="https://rijnieks.com" class="text-white">Author: Paul Cairns, Layout based on Aalto Fab Lab website as designed by Kris Rijnieks</a> (Paul Cairns) 2024
  </div>
</footer>

<script type="text/javascript" src="/paulcairns/assets/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/paulcairns/assets/plugins/bootstrap/bootstrap.min.js"></script>
<script src="/paulcairns/assets/plugins/jQuery/jquery.min.js"></script>
<script src="/paulcairns/assets/js/typewrite.js"></script>


<script src="/paulcairns/assets/plugins/jQuery/jquery.min.js"></script>

<script src="/paulcairns/assets/plugins/bootstrap/bootstrap.min.js"></script>

<script src="/paulcairns/assets/plugins/slick/slick.min.js"></script>

<script src="/paulcairns/assets/plugins/shuffle/shuffle.min.js"></script>


<script src="/paulcairns/assets/js/script.js"></script>
<script src="/paulcairns/assets/js/typewrite.js"></script>

</body>
</html>
